{"version":3,"sources":["webpack://ReactContexify/webpack/universalModuleDefinition","webpack://ReactContexify/webpack/bootstrap","webpack://ReactContexify/external \"react\"","webpack://ReactContexify/./src/utils/styles.ts","webpack://ReactContexify/./node_modules/classnames/index.js","webpack://ReactContexify/./src/utils/actions.ts","webpack://ReactContexify/./src/utils/eventManager.ts","webpack://ReactContexify/./src/components/cloneItem.ts","webpack://ReactContexify/./src/index.ts","webpack://ReactContexify/./src/components/Menu.tsx","webpack://ReactContexify/./src/components/Portal.tsx","webpack://ReactContexify/external \"react-dom\"","webpack://ReactContexify/./src/components/Item.tsx","webpack://ReactContexify/./src/components/Separator.tsx","webpack://ReactContexify/./src/components/IconFont.tsx","webpack://ReactContexify/external \"prop-types\"","webpack://ReactContexify/./src/components/Submenu.tsx","webpack://ReactContexify/./src/components/MenuProvider.tsx","webpack://ReactContexify/./src/utils/contextMenu.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__13__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","styles","menu","submenu","submenuArrow","separator","item","itemDisabled","itemContent","itemIcon","theme","animationWillEnter","animationWillLeave","light","dark","animation","fade","flip","pop","zoom","hasOwn","classNames","classes","arguments","length","arg","argType","push","Array","isArray","inner","apply","join","default","HIDE_ALL","DISPLAY_MENU","id","eventManager","eventList","Map","on","event","callback","this","has","set","Set","add","delete","emit","forEach","cb","args","console","warn","children","props","Children","map","toArray","filter","child","Boolean","cloneElement","Menu","Item","Separator","IconFont","Submenu","MenuProvider","contextMenu","KEY","ENTER","ESC","ARROW_UP","ARROW_DOWN","ARROW_LEFT","ARROW_RIGHT","useState","useRef","useEffect","className","onHidden","onShown","style","visible","setVisible","position","setPosition","nativeEvent","setNativeEvent","propsFromTrigger","setPropsFromTrigger","menuRef","unsubRef","current","show","hide","unBindWindowEvent","bindWindowEvent","addEventListener","handleKeyboard","removeEventListener","e","button","ctrlKey","type","keyCode","stopPropagation","x","y","pos","clientX","clientY","changedTouches","cssClasses","menuStyle","left","top","opacity","Portal","ref","onMouseEnter","onMouseLeave","cloneItem","useLayoutEffect","containerRef","document","createElement","body","appendChild","removeChild","createPortal","noop","disabled","data","onClick","isDisabled","role","propTypes","node","string","arrow","label","state","setState","innerWidth","innerHeight","rect","getBoundingClientRect","right","undefined","bottom","submenuStyle","childrenRefs","setChildRef","getChildren","component","storeRef","isValidElement","rest","render","attributes","preventDefault","defaultProps","hideAll"],"mappings":"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","file":"ReactContexify.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"), require(\"prop-types\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\", \"prop-types\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactContexify\"] = factory(require(\"react\"), require(\"react-dom\"), require(\"prop-types\"));\n\telse\n\t\troot[\"ReactContexify\"] = factory(root[\"react\"], root[\"react-dom\"], root[\"prop-types\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__13__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","/*\n * css classes mapping\n * */\nexport const styles = {\n  menu: 'react-contexify',\n  submenu: 'react-contexify react-contexify__submenu',\n  submenuArrow: 'react-contexify__submenu-arrow',\n  separator: 'react-contexify__separator',\n  item: 'react-contexify__item',\n  itemDisabled: 'react-contexify__item--disabled',\n  itemContent: 'react-contexify__item__content',\n  itemIcon: 'react-contexify__item__icon',\n  theme: 'react-contexify__theme--',\n  animationWillEnter: 'react-contexify__will-enter--',\n  animationWillLeave: 'react-contexify__will-leave--'\n};\n\n// I could use enum instead for both interfaces\n\nexport interface BuiltInTheme {\n  light: string;\n  dark: string;\n}\n\nexport interface BuiltInAnimation {\n  fade: string;\n  flip: string;\n  pop: string;\n  zoom: string;\n}\n\nexport const theme: BuiltInTheme = {\n  light: 'light',\n  dark: 'dark'\n};\n\nexport const animation: BuiltInAnimation = {\n  fade: 'fade',\n  flip: 'flip',\n  pop: 'pop',\n  zoom: 'zoom'\n};\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import { MenuId } from '../types';\n\nexport const HIDE_ALL = 0;\nexport const DISPLAY_MENU = (id: MenuId) => `DISPLAY_${id}`;\n","type Callback = (...args: any) => void;\ntype EventId = number | string;\n\ninterface EventManager {\n  eventList: Map<EventId, Set<Callback>>;\n  on: (event: EventId, callback: Callback) => () => boolean;\n  emit: (event: EventId, ...args: any) => boolean;\n}\n\nconst eventManager: EventManager = {\n  eventList: new Map(),\n  on(event, callback) {\n    this.eventList.has(event) || this.eventList.set(event, new Set());\n    this.eventList.get(event)!.add(callback);\n\n    return () => this.eventList.get(event)!.delete(callback);\n  },\n  emit(event, ...args) {\n    if (!this.eventList.has(event)) {\n      console.warn(\n        `<${event}> Event is not registered. Did you forgot to bind the event ?`\n      );\n      return false;\n    }\n    this.eventList.get(event)!.forEach(cb => cb.call(this, ...args));\n\n    return true;\n  }\n};\n\nexport { eventManager };\n","import { Children, cloneElement, ReactNode, ReactElement } from 'react';\nimport { TriggerEvent } from '../types';\n\nexport function cloneItem(\n  children: ReactNode,\n  props: { nativeEvent: TriggerEvent; propsFromTrigger?: object }\n) {\n  return Children.map(\n    // remove null item\n    Children.toArray(children).filter(child => Boolean(child)),\n    item => cloneElement(item as ReactElement<any>, props)\n  );\n}\n","export { Menu } from './components/Menu';\nexport { Item } from './components/Item';\nexport { Separator } from './components/Separator';\nexport { IconFont } from './components/IconFont';\nexport { Submenu } from './components/Submenu';\nexport { MenuProvider } from './components/MenuProvider';\n\nexport { contextMenu } from './utils/contextMenu';\nexport { theme, animation } from './utils/styles';\n","/* global: window */\r\nimport React, { ReactNode } from 'react';\r\nimport cx from 'classnames';\r\n\r\nimport { cloneItem } from './cloneItem';\r\nimport { Portal } from './Portal';\r\n\r\nimport { HIDE_ALL, DISPLAY_MENU } from '../utils/actions';\r\nimport { styles } from '../utils/styles';\r\nimport { eventManager } from '../utils/eventManager';\r\nimport { TriggerEvent, StyleProps, MenuId } from '../types';\r\n\r\nconst KEY = {\r\n  ENTER: 13,\r\n  ESC: 27,\r\n  ARROW_UP: 38,\r\n  ARROW_DOWN: 40,\r\n  ARROW_LEFT: 37,\r\n  ARROW_RIGHT: 39\r\n};\r\n\r\nexport interface MenuProps extends StyleProps {\r\n  /**\r\n   * Unique id to identify the menu. Use to Trigger the corresponding menu\r\n   */\r\n  id: MenuId;\r\n\r\n  /**\r\n   * Any valid node that can be rendered\r\n   */\r\n  children: ReactNode;\r\n\r\n  /**\r\n   * Theme is appended to `react-contexify__theme--${given theme}`.\r\n   *\r\n   * Built-in theme are `light` and `dark`\r\n   */\r\n  theme?: string;\r\n\r\n  /**\r\n   * Animation is appended to `.react-contexify__will-enter--${given animation}`\r\n   *\r\n   * Built-in animations are fade, flip, pop, zoom\r\n   */\r\n  animation?: string;\r\n\r\n  /**\r\n   * Invoked when the menu is shown.\r\n   */\r\n  onShown?: () => void;\r\n\r\n  /**\r\n   * Invoked when the menu is hidden.\r\n   */\r\n  onHidden?: () => void;\r\n}\r\n\r\n// interface MenuState {\r\n//   x: number;\r\n//   y: number;\r\n//   visible: boolean;\r\n//   nativeEvent: TriggerEvent;\r\n//   propsFromTrigger: object;\r\n// }\r\n\r\nconst { useState, useRef, useEffect } = React;\r\nfunction Menu({\r\n  animation,\r\n  children,\r\n  className,\r\n  id,\r\n  onHidden,\r\n  onShown,\r\n  style,\r\n  theme\r\n}: MenuProps) {\r\n  const [visible, setVisible] = useState(false);\r\n  const [position, setPosition] = useState({ x: 0, y: 0 });\r\n  const [nativeEvent, setNativeEvent] = useState({} as TriggerEvent);\r\n  const [propsFromTrigger, setPropsFromTrigger] = useState({});\r\n  // const [state, setState] = useState({\r\n  //   onShown: null,\r\n  //   onHidden: null\r\n  // });\r\n\r\n  const menuRef = useRef<HTMLDivElement>(null);\r\n  const unsubRef = useRef<(() => boolean)[]>([]);\r\n\r\n  useEffect(() => {\r\n    unsubRef.current.push(eventManager.on(DISPLAY_MENU(id), show));\r\n    unsubRef.current.push(eventManager.on(HIDE_ALL, hide));\r\n    return () => {\r\n      unsubRef.current.forEach(cb => cb());\r\n      unBindWindowEvent();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (visible) {\r\n      bindWindowEvent();\r\n      if (onShown) {\r\n        onShown();\r\n      }\r\n      return;\r\n    }\r\n\r\n    unBindWindowEvent();\r\n    if (onHidden) {\r\n      onHidden();\r\n    }\r\n  }, [visible]);\r\n\r\n  const bindWindowEvent = () => {\r\n    window.addEventListener('resize', hide);\r\n    window.addEventListener('contextmenu', hide);\r\n    window.addEventListener('mousedown', hide);\r\n    window.addEventListener('click', hide);\r\n    window.addEventListener('scroll', hide);\r\n    window.addEventListener('keydown', handleKeyboard);\r\n  };\r\n\r\n  const unBindWindowEvent = () => {\r\n    window.removeEventListener('resize', hide);\r\n    window.removeEventListener('contextmenu', hide);\r\n    window.removeEventListener('mousedown', hide);\r\n    window.removeEventListener('click', hide);\r\n    window.removeEventListener('scroll', hide);\r\n    window.removeEventListener('keydown', handleKeyboard);\r\n  };\r\n\r\n  const onMouseEnter = () => window.removeEventListener('mousedown', hide);\r\n\r\n  const onMouseLeave = () => window.addEventListener('mousedown', hide);\r\n\r\n  const hide = (event?: Event) => {\r\n    // Safari trigger a click event when you ctrl + trackpad\r\n    // Firefox:  trigger a click event when right click occur\r\n    const e = event as KeyboardEvent & MouseEvent;\r\n\r\n    if (\r\n      typeof e !== 'undefined' &&\r\n      (e.button === 2 || e.ctrlKey === true) &&\r\n      e.type !== 'contextmenu'\r\n    ) {\r\n      unBindWindowEvent();\r\n      setVisible(false);\r\n      return;\r\n    }\r\n\r\n    unBindWindowEvent();\r\n    // setState({ ...state, visible: false });\r\n    setVisible(false);\r\n  };\r\n\r\n  const handleKeyboard = (e: KeyboardEvent) => {\r\n    if (e.keyCode === KEY.ENTER || e.keyCode === KEY.ESC) {\r\n      unBindWindowEvent();\r\n      // setState({ ...state, visible: false });\r\n      setVisible(false);\r\n    }\r\n  };\r\n\r\n  // const setRef = (ref: HTMLDivElement) => {\r\n  //   menuRef = ref;\r\n  // };\r\n\r\n  const setMenuPosition = () => {\r\n    // if (menuRef.current) {\r\n    //   const { innerWidth: windowWidth, innerHeight: windowHeight } = window;\r\n    //   const {\r\n    //     offsetWidth: menuWidth,\r\n    //     offsetHeight: menuHeight\r\n    //   } = menuRef.current;\r\n    //   let { x, y } = position;\r\n    //   if (x + menuWidth > windowWidth) {\r\n    //     x -= x + menuWidth - windowWidth;\r\n    //   }\r\n    //   if (y + menuHeight > windowHeight) {\r\n    //     y -= y + menuHeight - windowHeight;\r\n    //   }\r\n    //   setPosition({ x, y });\r\n    // }\r\n  };\r\n\r\n  const getMousePosition = (e: TriggerEvent) => {\r\n    const pos = {\r\n      x: e.clientX,\r\n      y: e.clientY\r\n    };\r\n\r\n    if (\r\n      e.type === 'touchend' &&\r\n      (!pos.x || !pos.y) &&\r\n      (e.changedTouches && e.changedTouches.length > 0)\r\n    ) {\r\n      pos.x = e.changedTouches[0].clientX;\r\n      pos.y = e.changedTouches[0].clientY;\r\n    }\r\n\r\n    if (!pos.x || pos.x < 0) {\r\n      pos.x = 0;\r\n    }\r\n\r\n    if (!pos.y || pos.y < 0) {\r\n      pos.y = 0;\r\n    }\r\n\r\n    return pos;\r\n  };\r\n\r\n  const show = (e: TriggerEvent, props: object) => {\r\n    e.stopPropagation();\r\n    eventManager.emit(HIDE_ALL);\r\n\r\n    if ((props as any).position) {\r\n      const { x, y } = (props as any).position;\r\n\r\n      setVisible(true);\r\n      setPosition({ x, y });\r\n      setNativeEvent(e);\r\n      setPropsFromTrigger(props);\r\n      // setState({\r\n      //   ...state,\r\n      // });\r\n      setMenuPosition();\r\n      return;\r\n    }\r\n\r\n    const { x, y } = getMousePosition(e);\r\n\r\n    setVisible(true);\r\n    setPosition({ x, y });\r\n    setNativeEvent(e);\r\n    setPropsFromTrigger(props);\r\n    // setState({\r\n    //   ...state,\r\n    // });\r\n    setMenuPosition();\r\n  };\r\n\r\n  // const { propsFromTrigger } = state;\r\n\r\n  const { x, y } = position;\r\n  const cssClasses = cx(styles.menu, className, {\r\n    [styles.theme + theme]: theme,\r\n    [styles.animationWillEnter + animation]: animation\r\n  });\r\n  const menuStyle = {\r\n    ...style,\r\n    left: x,\r\n    top: y + 1,\r\n    opacity: 1\r\n  };\r\n\r\n  return (\r\n    <Portal>\r\n      {visible && (\r\n        <div\r\n          className={cssClasses}\r\n          style={menuStyle}\r\n          ref={menuRef}\r\n          onMouseEnter={onMouseEnter}\r\n          onMouseLeave={onMouseLeave}\r\n        >\r\n          <div>\r\n            {cloneItem(children, {\r\n              nativeEvent,\r\n              propsFromTrigger\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </Portal>\r\n  );\r\n}\r\n\r\nexport { Menu };\r\n","import React, { ReactNode } from 'react';\nimport { createPortal } from 'react-dom';\n\ntype Props = {\n  children: ReactNode;\n};\n\nconst { useEffect, useLayoutEffect, useRef } = React;\n\nfunction Portal({ children }: Props) {\n  // const [canRender, setCanRender] = useState(false);\n  const containerRef = useRef<HTMLDivElement>(document.createElement('div'));\n  // state = {\n  //   canRender: false\n  // };\n  // const container = document.createElement(\"div\");\n  useLayoutEffect(() => {\n    if (containerRef.current) {\n      document.body.appendChild(containerRef.current);\n    }\n  });\n  useEffect(() => {\n    // this.container = document.createElement(\"div\");\n    // document.body.appendChild(container);\n    // this.setState({\n    //   canRender: true\n    // });\n    // setCanRender(true);\n    return () => {\n      if (containerRef.current) {\n        document.body.removeChild(containerRef.current);\n      }\n    };\n  }, []);\n  // componentDidMount() {\n  //   this.container = document.createElement('div');\n  //   document.body.appendChild(this.container);\n  //   this.setState({\n  //     canRender: true\n  //   });\n  // }\n\n  // componentWillUnmount() {\n  //   document.body.removeChild(this.container);\n  // }\n  // render() {\n  return createPortal(children, containerRef.current!);\n  // }\n}\n\nexport { Portal };\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","import React, { ReactNode } from 'react';\n// import PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport { styles } from '../utils/styles';\nimport {\n  MenuItemEventHandler,\n  TriggerEvent,\n  StyleProps,\n  InternalProps\n} from '../types';\n\nexport interface ItemProps extends StyleProps, InternalProps {\n  /**\n   * Any valid node that can be rendered\n   */\n  children: ReactNode;\n\n  /**\n   * Passed to the `Item` onClick callback. Accessible via `props`\n   */\n  data?: object;\n\n  /**\n   * Disable or not the `Item`. If a function is used, a boolean must be returned\n   */\n  disabled?: boolean | ((args: MenuItemEventHandler) => boolean);\n\n  /**\n   * Callback when the current `Item` is clicked. The callback give you access to the current event and also the data passed\n   * to the `Item`.\n   * `({ event, props }) => ...`\n   */\n  onClick?: (args: MenuItemEventHandler) => any;\n}\n\nconst noop = () => {};\n\n// const { useState } = React;\nfunction Item({\n  disabled = false,\n  nativeEvent,\n  propsFromTrigger,\n  data,\n  children,\n  onClick = noop,\n  className,\n  style\n}: ItemProps) {\n  // static propTypes = {\n  //   children: PropTypes.node.isRequired,\n  //   data: PropTypes.object,\n  //   disabled: PropTypes.oneOfType([PropTypes.func, PropTypes.bool]),\n  //   onClick: PropTypes.func,\n  //   nativeEvent: PropTypes.object,\n  //   propsFromTrigger: PropTypes.object,\n  //   className: PropTypes.string,\n  //   style: PropTypes.object\n  // };\n\n  // static defaultProps = {\n  //   disabled: false,\n  //   onClick: noop\n  // };\n\n  const isDisabled =\n    typeof disabled === 'function'\n      ? disabled({\n          event: nativeEvent as TriggerEvent,\n          props: { ...propsFromTrigger, ...data }\n        })\n      : disabled;\n\n  // constructor(props: ItemProps) {\n  //   super(props);\n  //   const { disabled, nativeEvent, propsFromTrigger, data } = this.props;\n\n  //   this.isDisabled =\n  //     typeof disabled === 'function'\n  //       ? disabled({\n  //           event: nativeEvent as TriggerEvent,\n  //           props: { ...propsFromTrigger, ...data }\n  //         })\n  //       : disabled;\n  // }\n\n  const handleClick = (e: React.MouseEvent) => {\n    isDisabled\n      ? e.stopPropagation()\n      : onClick({\n          event: nativeEvent as TriggerEvent,\n          props: { ...propsFromTrigger, ...data }\n        });\n  };\n\n  // render() {\n  // const { className, style, children } = this.props;\n\n  const cssClasses = cx(styles.item, className, {\n    [`${styles.itemDisabled}`]: isDisabled\n  });\n\n  return (\n    <div\n      className={cssClasses}\n      style={style}\n      onClick={handleClick}\n      role=\"presentation\"\n    >\n      <div className={styles.itemContent}>{children}</div>\n    </div>\n  );\n}\n\nexport { Item };\n","import React, { SFC } from 'react';\n\nimport { styles } from '../utils/styles';\n\nexport const Separator: SFC = () => <div className={styles.separator} />;\n","import React, { SFC, ReactNode } from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\n\nimport { styles } from '../utils/styles';\nimport { StyleProps } from '../types';\n\nexport interface IconFontProps extends StyleProps {\n  /**\n   * Any valid node that can be rendered\n   */\n  children?: ReactNode;\n}\n\nconst IconFont: SFC<IconFontProps> = ({ className, style, children }) => (\n  <i className={cx(styles.itemIcon, className)} style={style}>\n    {children || ''}\n  </i>\n);\n\nIconFont.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  style: PropTypes.object\n} as any;\n// Hack till the typedef is fixed.\n\nexport { IconFont };\n","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","import React, { ReactNode, SyntheticEvent } from 'react';\nimport cx from 'classnames';\n\nimport { cloneItem } from './cloneItem';\nimport { styles } from '../utils/styles';\nimport {\n  MenuItemEventHandler,\n  TriggerEvent,\n  StyleProps,\n  InternalProps\n} from '../types';\n\nexport interface SubMenuProps extends StyleProps, InternalProps {\n  /**\n   * Any valid node that can be rendered\n   */\n  label: ReactNode;\n\n  /**\n   * Any valid node that can be rendered\n   */\n  children: ReactNode;\n\n  /**\n   * Render a custom arrow\n   */\n  arrow?: ReactNode;\n\n  /**\n   * Disable or not the `Submenu`. If a function is used, a boolean must be returned\n   */\n  disabled?: boolean | ((args: MenuItemEventHandler) => boolean);\n}\n\ninterface SubMenuState {\n  left?: string | number;\n  right?: string | number;\n  top?: string | number;\n  bottom?: string | number;\n}\n\nconst { useState, useRef, useEffect } = React;\nfunction Submenu({\n  arrow = 'â–¶',\n  disabled = false,\n  nativeEvent = {} as TriggerEvent,\n  className,\n  style,\n  label,\n  children,\n  propsFromTrigger\n}: SubMenuProps) {\n  const [state, setState] = useState<SubMenuState>({\n    left: '100%',\n    top: 0,\n    bottom: 'initial'\n  });\n\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // setRef = (ref: HTMLDivElement) => {\n  //   this.menu = ref;\n  // };\n\n  // const componentDidMount = () => {\n  //   const { innerWidth, innerHeight } = window;\n  //   const rect = menuRef.current.getBoundingClientRect();\n  //   const style: SubMenuState = {};\n\n  //   if (rect.right < innerWidth) {\n  //     style.left = \"100%\";\n  //     style.right = undefined;\n  //   } else {\n  //     style.right = \"100%\";\n  //     style.left = undefined;\n  //   }\n\n  //   if (rect.bottom > innerHeight) {\n  //     style.bottom = 0;\n  //     style.top = \"initial\";\n  //   } else {\n  //     style.bottom = \"initial\";\n  //     style.top = 0;\n  //   }\n\n  //   setState(style);\n  // };\n\n  useEffect(() => {\n    if (menuRef.current) {\n      const { innerWidth, innerHeight } = window;\n      const rect = menuRef.current.getBoundingClientRect();\n      const style: SubMenuState = {};\n\n      if (rect.right < innerWidth) {\n        style.left = '100%';\n        style.right = undefined;\n      } else {\n        style.right = '100%';\n        style.left = undefined;\n      }\n\n      if (rect.bottom > innerHeight) {\n        style.bottom = 0;\n        style.top = 'initial';\n      } else {\n        style.bottom = 'initial';\n        style.top = 0;\n      }\n\n      setState(style);\n    }\n  }, [menuRef.current]);\n\n  const handleClick = (e: SyntheticEvent) => {\n    e.stopPropagation();\n  };\n\n  const cssClasses = cx(styles.item, className, {\n    [`${styles.itemDisabled}`]:\n      typeof disabled === 'function'\n        ? disabled({\n            event: nativeEvent as TriggerEvent,\n            props: { ...propsFromTrigger }\n          })\n        : disabled\n  });\n\n  const submenuStyle = {\n    ...style,\n    ...state\n  };\n\n  return (\n    <div className={cssClasses} role=\"presentation\">\n      <div className={styles.itemContent} onClick={handleClick}>\n        {label}\n        <span className={styles.submenuArrow}>{arrow}</span>\n      </div>\n      <div className={styles.submenu} ref={menuRef} style={submenuStyle}>\n        {cloneItem(children, {\n          propsFromTrigger,\n          nativeEvent: nativeEvent as TriggerEvent\n        })}\n      </div>\n    </div>\n  );\n  // }\n}\n\nexport { Submenu };\n","import React, {\n  createElement,\n  Children,\n  cloneElement,\n  isValidElement,\n  ReactNode,\n  SyntheticEvent,\n  ReactElement\n} from 'react';\n\nimport { DISPLAY_MENU } from '../utils/actions';\nimport { eventManager } from '../utils/eventManager';\nimport { MenuId, StyleProps } from '../types';\n\nexport interface MenuProviderProps extends StyleProps {\n  /**\n   * Unique id to identify the menu. Use to Trigger the corresponding menu\n   */\n  id: MenuId;\n\n  /**\n   * Any valid node that can be rendered\n   */\n  children: ReactNode;\n\n  /**\n   * Any valid node that can be rendered or a function returning a valid react node\n   */\n  component?: ReactNode | ((args?: any) => ReactNode);\n\n  /**\n   * Render props\n   */\n  render?: (args?: any) => ReactElement;\n\n  /**\n   * Any react event\n   * `onClick`, `onContextMenu`, ...\n   */\n  event?: string;\n\n  /**\n   * Store children ref\n   * `default: true`\n   */\n  storeRef: boolean;\n\n  /**\n   * Any valid object, data are passed to the menu item callback\n   */\n  data?: object;\n}\n\nconst { useRef } = React;\nfunction MenuProvider(props: MenuProviderProps): ReactElement {\n  // static defaultProps = {\n  //   component: 'div',\n  //   event: 'onContextMenu',\n  //   storeRef: true\n  // };\n\n  const childrenRefs = useRef([] as HTMLElement[]);\n\n  const handleEvent = (e: SyntheticEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    eventManager.emit(DISPLAY_MENU(props.id), e.nativeEvent, {\n      ref:\n        childrenRefs.current.length === 1\n          ? childrenRefs.current[0]\n          : childrenRefs.current,\n      ...props.data\n    });\n  };\n\n  const setChildRef = (ref: HTMLElement) =>\n    ref === null || childrenRefs.current.push(ref);\n\n  const getChildren = () => {\n    // remove all the props specific to the provider\n    const {\n      id,\n      component,\n      event,\n      children,\n      className,\n      style,\n      storeRef,\n      data,\n      ...rest\n    } = props;\n\n    // reset refs\n    childrenRefs.current = [];\n\n    return Children.map(children, child =>\n      isValidElement(child)\n        ? cloneElement(child as ReactElement<any>, {\n            ...rest,\n            ...(storeRef ? { ref: setChildRef } : {})\n          })\n        : child\n    );\n  };\n\n  const { component, render, event, className, style } = props;\n  const attributes = {\n    [event!]: handleEvent,\n    className,\n    style\n  };\n\n  if (typeof render === 'function') {\n    return render({ ...attributes, children: getChildren() });\n  }\n\n  return createElement(component as any, attributes, getChildren());\n}\n\nMenuProvider.defaultProps = {\n  component: 'div',\n  event: 'onContextMenu',\n  storeRef: true\n};\n\nexport { MenuProvider };\n","import { eventManager } from './eventManager';\nimport { HIDE_ALL, DISPLAY_MENU } from './actions';\nimport { MenuId } from '../types';\nimport React, { SyntheticEvent } from 'react';\n\nexport interface ContextMenu {\n  show: (params: {\n    id: MenuId;\n    event: MouseEvent | TouchEvent | React.MouseEvent | React.TouchEvent;\n    props?: object;\n  }) => void;\n  hideAll: () => void;\n}\n\nconst contextMenu: ContextMenu = {\n  show({ id, event, props }) {\n    eventManager.emit(\n      DISPLAY_MENU(id),\n      (event as SyntheticEvent).nativeEvent || event,\n      props\n    );\n  },\n  hideAll() {\n    eventManager.emit(HIDE_ALL);\n  }\n};\n\nexport { contextMenu };\n"],"sourceRoot":""}